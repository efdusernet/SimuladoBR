# Application Configuration
# Copy this file to .env and fill in your actual values
# NEVER commit .env file with real credentials to version control

# --- Production example (www.simuladorbr.com.br) ---
# NODE_ENV=production
# APP_BASE_URL=https://www.simuladorbr.com.br
# FRONTEND_URL=https://www.simuladorbr.com.br
#
# # Redis (recommended in production)
# USE_REDIS=true
# REDIS_URL=redis://127.0.0.1:6379
#
# # PgBouncer (recommended in production)
# PGBOUNCER=true
# DB_PORT=6432
# DB_POOL_MAX=10
# DB_POOL_MIN=0
#
# # Chat proxy (if chat-service runs as a separate process on the same VPS)
# CHAT_SERVICE_BASE_URL=http://127.0.0.1:4010
#
# # Chat embedded mode (alternative to CHAT_SERVICE_BASE_URL)
# # CHAT_SERVICE_EMBED=true
# # CHAT_SERVICE_HOST=www.simuladorbr.com.br

# Base URLs
APP_BASE_URL=http://app.localhost:3000
FRONTEND_URL=http://app.localhost:3000

# Email/SMTP Configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=465
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-specific-password
EMAIL_FROM=your-email@gmail.com
SMTP_ALLOW_SELF_SIGNED=true

# Database Configuration (PostgreSQL)
# REQUIRED: All database fields must be set
DB_NAME=Simulados
DB_USER=postgres
DB_PASSWORD=your-secure-password-here
DB_HOST=localhost
DB_PORT=5432
# Optional: Set to true for SSL connections (production)
DB_SSL=false

# PgBouncer (recommended in production)
# If you run PgBouncer on the same VPS, it typically listens on port 6432.
# To enable, set DB_PORT=6432 and optionally PGBOUNCER=true.
PGBOUNCER=false
# Connection pool tuning (important when running multiple Node processes)
# When using PgBouncer, prefer smaller pools per process.
DB_POOL_MAX=20
DB_POOL_MIN=5
DB_POOL_ACQUIRE_MS=30000
DB_POOL_IDLE_MS=10000

# JWT Secret for Authentication
# REQUIRED: Must be at least 32 characters
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=generate-a-secure-random-string-at-least-32-characters-long

# Redis Configuration for Session Storage
# Set USE_REDIS=false for development with in-memory storage
# In production, use Redis for persistent sessions across server restarts
USE_REDIS=false
REDIS_URL=redis://localhost:6379

# Exam Configuration
# Set to true to disable fallback exam type data (fetch from database only)
EXAM_TYPES_DISABLE_FALLBACK=false

# Admin Features
# Set to TRUE to allow exam data reset operations (development only)
ALLOW_RESET=FALSE

# Admin identification (used by /api/users/me for UI gating)
# Comma-separated list of emails that should be treated as admin.
# Example: ADMIN_EMAILS=eliel.deuclides@gmail.com,other@domain.com
ADMIN_EMAILS=

# Logging Configuration
# Set to true to enable SQL query logging (development only)
SEQUELIZE_LOG=false
# Set to true to enable file logging (automatically enabled in production)
LOG_TO_FILE=false

# Node Environment
NODE_ENV=development

# --- Chat-service (optional) ---
# By default, SimuladosBR proxies chat-service under /chat/* to a separate process (ex.: :4010).
# If you want to run chat-service inside the SAME Node process/port (no nginx), enable embedding:
# - Access via: http://chat.localhost:3000
# - Admin WS via: ws://chat.localhost:3000/v1/admin/ws
CHAT_SERVICE_EMBED=false
CHAT_SERVICE_HOST=chat.localhost

# NOTE: Embedded mode still needs chat-service env vars (especially DATABASE_URL, ADMIN_TOKEN...).
# You can keep them in chat-service/.env (recommended); backend will load chat-service/.env and
# only fill missing/blank process env vars.

# Skip environment validation (for specific scripts only)
# SKIP_ENV_VALIDATION=true
